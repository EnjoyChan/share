<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>Function Program</title>

		<meta name="description" content="A framework for easily creating beautiful presentations using HTML">
		<meta name="author" content="Hakim El Hattab">

		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<link rel="stylesheet" href="../revealjs/css/reveal.css">
		<link rel="stylesheet" href="../revealjs/css/theme/blood.css" id="theme">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="../revealjs/lib/css/zenburn.css">
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<!--  page 1-->
				<section>
					<h3>Functional Programing</h3>
					<h4>å‡½æ•°å¼ç¼–ç¨‹</h4>
					<p>
						Enjoy Chan(å¹³å°å‰ç«¯)
					</p>
				</section>

				<section>
					<section>
						<h3>OOPï¼šé¢å‘å¯¹è±¡ç¼–ç¨‹</h3>
					</section>
					<section>
						<p>jsé¢å‘å¯¹è±¡ç¼–ç¨‹</p>
						<div style="background-color: rgba(255, 255, 255, .3); padding: 10px 0">
							<ol>
								<li>æ„é€ å‡½æ•°</li>
								<li>åŸå‹é“¾</li>
								<li>prototype</li>
								<li>this</li>
								<li>å±æ€§ã€æ–¹æ³•</li>
								<li>class</li>
								<li>new</li>
							</ol>
						</div>
						<div class="fragment">see an example â¬‡ï¸</div>
					</section>
					<section>
						<h4>js ç»§æ‰¿</h4>
						<p>ç±»: extend</p>
						<pre>
							<code class="hljs" data-trim contenteditable>
function Animal(name) {
	this.name = name;//å±æ€§
}

function Dog(name, color) {
	Animal.call(this, name);//call
	this.color = color;
}

Dog.prototype = {//æ–¹æ³•
	getColor: function() {
		return this.color;
	},
	getName: function() {
		return this.name
	}
}

dog = new Dog();//new instanceof Dog, not instance of Animal
							</code>
						</pre>
					</section>
					<section>
						<p>åŸå‹é“¾ï¼šinherit</p>
						<pre>
							<code class="hljs" data-trim contenteditable>
function Animal() {
}

Animal.prototype.getName = function() {
	return this.name;
}

function Dog(name, color) {
	this.name = name;
	this.color = color;
}
Dog.prototype = new Animal();
Dog.prototype.constructor = Dog;

dog = new Dog();
							</code>
						</pre>
						<p class="fragment zoom">å¢æ·»éœ€æ±‚ï¼š åŠ¨ç‰©å«å£°ï¼Ÿ</p>
					</section>
					<section>
						<p>é‡å†™å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•</p>
						<pre>
							<code class="hljs" data-trim contenteditable>
Animal.prototype.bark = function() {

}

Dog.prototype.bark = function() {

}

//jquery
$.fn.bark = function() {

}

							</code>
						</pre>
					</section>
					<section>
						<ol>
							<li class="fragment">æ¯æ¬¡ä¿®æ”¹ï¼Œé€šè¿‡ç‰ˆæœ¬æ¥è¿­ä»£</li>
							<li class="fragment">å®ä¾‹åŒ–åï¼Œåªä½¿ç”¨å…¶ä¸­éƒ¨åˆ†æ–¹æ³•</li>
							<li class="fragment">'this' comfusion</li>
						</ol>
					</section>
				</section>

				<section>
					<section>
						<h3>FPï¼šå‡½æ•°å¼ç¼–ç¨‹</h3>
					</section>
					<section>
						<h4>å¸¸è§ JS å‡½æ•°åº“</h4>
						<div style="background-color: rgba(255, 255, 255, .3); padding: 10px 0">
							<ol>
								<li><a href="http://underscorejs.org">underscore.js</a></li>
								<li><a href="https://lodash.com/">lodash.js</a></li>
								<li><a href="http://danieltao.com/lazy.js/">lazy.js</a></li>
							</ol>
						</div>
						<pre class="fragment">
							<code class="hljs" data-trim contenteditable>
//underscore.js lodash.js
var data = [{name: 'enjoy chan', age: 17}, {name: 'coco cao', age: 17}];
_.filter(_.pluck(data, 'name'), function(name) {
	return name == 'enjoy chan';
})
//lazy.js
data.pluck('name')
    .filter(function(){})
							</code>
						</pre>
					</section>
					<section>
						<h4><a href="https://en.wikipedia.org/wiki/Lambda_calculus">lambda calculus</a>: lambda è¡¨è¾¾å¼</h4>
						<p>heart: mathematical logic</p>
						<blockquote cite="https://en.wikipedia.org/wiki/Lambda_calculus">
							Lambda calculus (also written as Î»-calculus) is a formal system in mathematical logic for expressing computation based on function abstraction and application using variable binding and substitution
						</blockquote>
					</section>
				</section>

				<section>
					<section>
						<h4>Pure Functions: çº¯å‡½æ•°</h4>
					</section>
					<section>
						<blockquote>
							programs: transformations of data
						</blockquote>
						<img class="fragment zoom" src="./pics/p.jpg" alt="ç¨‹åº">
					</section>
					<section>
						<pre>
							<code class="hljs" data-trim contenteditable>
const x = 10;

func1 = (a) => a + x;//not pure function

func2 = (a) => a + 10;//pure function
							</code>
						</pre>
						<p class="fragment">çº¯å‡½æ•°ï¼šä»…ä»…ä¾èµ–äºå‡½æ•°çš„è¾“å…¥ï¼Œå¹¶ä¸”å½“è¾“å…¥ç›¸åŒæ—¶è¾“å‡ºä¿æŒä¸€è‡´ã€‚</p>
						<p class="fragment">side-effect free: æ— å‰¯ä½œç”¨</p>
					</section>
					<section>
						<pre>
							<code class="hljs" data-trim contenteditable>
var data = {},
    arr = [1, 2, 3];

for(var i = 0; i < arr.length; i++) {
	data[arr[i]] = arr[i]
}

//es5
arr.forEach(function(item) {
	data[item] = item;
})

//lodash || underscore
_.each(arr, function() {
	data[item] = item;
})
							</code>
						</pre>
						<div style="background-color: rgba(0, 0, 0, .5); padding: 10px 0">
							<ul class="fragment">
								<li>åŠ¿å¿…ä¸å¤–ä½œç”¨åŸŸè€¦åˆ</li>
								<li>è¿­ä»£æ„å›¾ä¸æ˜æ˜¾</li>
							</ul>
						</div>
					</section>
					<section>
						<p>Advantages</p>
						<ul>
							<li>ä»…ä»…éœ€è¦å…³æ³¨å‡½æ•°ä½“æœ¬èº«, ä¾¿äºè°ƒè¯•</li>
						</ul>
					</section>
				</section>

				<section>
					<section>
						<h4>Function Composition: å‡½æ•°ç»„åˆ</h4>
					</section>
					<section>
						<p>unix pipe `|`</p>
						<p>è·å–å¯¹è±¡çš„idå€¼</p>
						<pre>
							<code class="hljs" data-trim contenteditable>
//æ•°æ®æµä»å·¦åˆ°å³
data | getID('result_rows') | getID('id')
							</code>
						</pre>
					</section>
					<section>
						<p>
							Lambdaè¿ç®—ï¼šcompose
						</p>
						<p>functional pipelines</p>
						<pre class="fragment">
							<code class="hljs" data-trim contenteditable>
//æ•°æ®æµä»å³åˆ°å·¦
compose(getID('id'), getID('result_rows'));
							</code>
						</pre>
						<pre class="fragment">
							<code class="hljs" data-trim contenteditable>
//@fns: array, [fn, fn,...]
const pipe = (fns) => (x) => fns.reduce((v, fn) => fn(v), x);

pipe([getID('result_rows'), getID('id')]);
							</code>
						</pre>
					</section>
					<section>
						<h5>example</h5>
						<p>å‡è®¾ç°åœ¨æœ‰ä¸ªéœ€æ±‚</p>
						<ol>
							<li>è¾“å‡ºâ€˜æ¬¢è¿æŸæŸâ€™</li>
							<li class="fragment">æ ¹æ®æ€§åˆ«è¾“å‡ºâ€˜æ¬¢è¿æŸæŸå¥³å£«ï¼å…ˆç”Ÿâ€™</li>
							<li class="fragment">æ ¹æ®æ—©ä¸Šã€ä¸­åˆã€æ™šä¸Šè¾“å‡ºâ€˜æ—©ä¸Šå¥½ï¼Œ æŸæŸå¥³å£«â€™......</li>
						</ol>

						<pre>
							<code class="hljs" data-trim contenteditable>
const welcome = (name) => `welcome ${name}`;
							</code>
						</pre>
						<pre class="fragment">
							<code class="hljs" data-trim contenteditable>
const mr = (name) => `Mr ${name}`;

welcome(mr(name));

//compose
compose(welcome, mr);

//pipe
pipe([mr, welcome]);

							</code>
						</pre>
					</section>
				</section>

				<section>
					<section>
						<h4>Function Currying: å‡½æ•°æŸ¯é‡ŒåŒ–</h4>
					</section>
					<section>
						<p>js å‡½æ•°è°ƒç”¨</p>
						<pre>
							<code class="hljs" data-trim contenteditable>
const add = (x, y) => x + y;
add(1, 2); //= 3
add(1); //= NaN
add(1, 2, 3);//= 3
							</code>
						</pre>
						<pre class="fragment">
							<code class="hljs" data-trim contenteditable>
const curry = require('curry');
const add = curry((x, y) => x + y);
const add100 = add(100);
add100(1); //= 101
add(1, 2);//= 3
add(1)(2);//=3
add(1, 2, 3);//=3
							</code>
						</pre>
						<div style="background-color: rgba(0, 0, 0, .5); padding: 10px 0">
							<ul class="fragment">
								<li>å½“å‚æ•°ä¸ªæ•°å°‘äºå‡½æ•°æ—¢å®šå‚æ•°ä¸ªæ•°æ—¶è¿”å›å¦ä¸€ä¸ªfunction</li>
								<li>å½“å‚æ•°å¤§äºç­‰äºå‡½æ•°æ—¢å®šå‚æ•°ä¸ªæ•°æ—¶ç›´æ¥æ‰§è¡Œfunction</li>
							</ul>
						</div>
					</section>
					<section>
						<h5>é€‚ç”¨äºmapã€compose ã€pipeç­‰</h5>
						<p>å¯é…ç½®ï¼Œæé«˜ä»£ç å¤ç”¨ç‡</p>
						<pre class="fragment">
							<code class="hljs" data-trim contenteditable>
//è¿”å›æ•°æ®çš„id
const data = [{id: 1, sku: '1'},{id: 2, sku: '2'}, {id: 3, sku: '3'}];
data.map((item) => item.id);//= [1, 2, 3]
							</code>
						</pre>
						<pre class="fragment">
							<code class="hljs" data-trim contenteditable>
//è¿”å›æ•°æ®çš„id
const getID = Curry((property, object) => object[property]);
data.map(getID('id'));//= [1, 2, 3]
							</code>
						</pre>
					</section>
					<section>
						<h5>é“¾å¼è°ƒç”¨: elegant</h5>
						<p class="frament">ajaxè¯·æ±‚è·å–id</p>
						<pre class="fragment">
							<code class="hljs" data-trim contenteditable>
//result_rows = {products: [{id: 1}, {id: 2}]};
$.ajax({
	url: '/server.json',
})
.then(function(result){
	return result.result_rows;
})
.then(function(data) {
	var ids = data.products.map(function(product){//= [1, 2]
		return product.id;
	});
})
							</code>
						</pre>
					</section>
					<section>
						<pre>
							<code class="hljs" data-trim contenteditable>
//result_rows = {products: [{id: 1}, {id: 2}]};
$.ajax({
	url: '/server.json',
})
.then(getID('result_rows'))
.then(getID('id'))
							</code>
						</pre>
					</section>
				</section>

				<section>
					<section>
						<h4>Monads, Arrows, Functors, Applicatives ...</h4>
					</section>
					<section>
						<h5>Monad</h5>
						<p>ä¸€ç§è®¾è®¡æ¨¡å¼ï¼šç¨‹åºæ§åˆ¶æµ</p>
						<pre>
							<code class="hljs" data-trim contenteditable>
list = [-1,0,1];
list.map(inc); //= [0,1,2]
list.map(isZero); //= [ture, false, true]
							</code>
						</pre>
					</section>
					<section>
						<pre>
							<code class="hljs" data-trim contenteditable>
[x*2 | x<-[1..10], odd x]
							</code>
						</pre>
						<pre class="fragment">
							<code class="hljs" data-trim contenteditable>
var x = [1, 2, 3,4,5,6,7,8,9,10];

var result = x.filter(function(item){
	return item % 2 != 0;
}).map(function(item) {
	return item * 2;
})
							</code>
						</pre>
						<pre class="fragment">
							<code class="hljs" data-trim contenteditable>
const fetchAPI = () => {
	 let req = SendRequest(url);
	 let rsp = req.GetResponse();
}
							</code>
						</pre>
						<p class="fragment">bind: =></p>
					</section>
					<section>
						<h5>Arrow: es6ç®­å¤´å‡½æ•°</h5>
						<pre>
							<code class="hljs" data-trim contenteditable>
//return value
const square = (x) => square(x);

//return func
const func = (fn) => (x) => fn(x);
							</code>
						</pre>
						<p class="fragment">no ï½€thisï½€</p>
						<p class="fragment">one argumnet, return value or function</p>
					</section>
				</section>

				<section>
					<section>
						<h4>Referential Transparency: å¼•ç”¨é€æ˜</h5>
					</section>
					<section>
						<pre>
							<code class="hljs" data-trim contenteditable>
//ex: 1
{} == {} //= false
[] == [] //= false

//ex: 2
var a = {};
var b = a;
b == a //= true
b.f = 'f';
b == a //= true b:{f: 'f'} a:{f: 'f'}
							</code>
						</pre>
						<p class="fragment">æ·±å¯¹æ¯”</p>
					</section>
				</section>

				<section>
					<section>
						<h4>Immutable Data: æ•°æ®ä¸å¯å˜</h4>
					</section>
					<section>
						<ol>
							<li>ä¸å…è®¸ä¸æ”¹å˜å¼•ç”¨è€Œä¿®æ”¹å˜é‡</li>
							<li>é“¾è¡¨æ•°æ®ç»“æ„å…±äº«</li>
						</ol>
						<div>
							<img src="./pics/table.png" alt="é“¾è¡¨">
						</div>
					</section>
					<section>
						<h5>ç»„ä»¶è®¾è®¡</h5>
						<pre class="fragment">
							<code class="hljs" data-trim contenteditable>
<todolist list={list}>
	<list-item>{list_item}</list-item>
	<list-item>{list_item}</list-item>
</todolist>
							</code>
						</pre>
						<p class="fragment">reactJs: props and stats</p>
						<a href="http://facebook.github.io/immutable-js/" class="fragment">facebook immutable.js</a>
					</section>
				</section>

				<section>
					<h4>in a word</h4>
					<ol>
						<li class="fragment zoom">no more `this`</li>
						<li class="fragment zoom">side-effect free</li>
						<li class="fragment zoom">function with one argument</li>
						<li class="fragment zoom">use arrow, not ï½€functionï½€</li>
						<li class="fragment zoom">use const, not letã€var</li>
					</ol>
				</section>

				<section data-background="./pics/1.jpg" data-transition="zoom">
					<div style="background-color: rgba(0, 0, 0, 0.6); color: #fff; padding: 20px;">
						<h4>the end</h4>
						<blockquote>
						   	My secret is to share. --author of VueJs
						</blockquote>
						<p class="fragment">thanks for your attentionï½ğŸ‘€ </p>
					</div>
					<!-- <img src="./pics/1.jpg" alt="" width="420px"> -->
				</section>
			</div>
		</div>


		<script src="../revealjs/lib/js/head.min.js"></script>
		<script src="../revealjs/js/reveal.js"></script>

		<script>

			// More info https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				transition: 'slide', // none/fade/slide/convex/concave/zoom

				// More info https://github.com/hakimel/reveal.js#dependencies
				dependencies: [
					{ src: '../revealjs/lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: '../revealjs/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: '../revealjs/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: '../revealjs/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: '../revealjs/plugin/zoom-js/zoom.js', async: true },
					{ src: '../revealjs/plugin/notes/notes.js', async: true }
				],
				parallaxBackgroundImage: './pics/test.jpg', // e.g. "https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg"

			    // Parallax background size
			    parallaxBackgroundSize: '1920px 1080px', // CSS syntax, e.g. "2100px 900px" - currently only pixels are supported (don't use % or auto)

			    // Number of pixels to move the parallax background per slide
			    // - Calculated automatically unless specified
			    // - Set to 0 to disable movement along an axis
			    parallaxBackgroundHorizontal: 200,
			    parallaxBackgroundVertical: 50
			});

		</script>

	</body>
</html>
